<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/manager.css">
	<link rel="stylesheet" href="../node_modules/simple-keyboard/build/css/index.css">
    <script src="../static/js/manager-add-employee.js" type="module" defer></script>
    <title>Manager - Add Employee</title>
</head>
<body>
    <a href="index.html"><button id="home">Log Out</button></a>
    <div class="manager-add-employee-main-body" id="main-body">
        <a href="manager.html" type="button"><button id="back">Back</button></a>
        <div id="add-employee-inputs">
            <div>
                <label for="first-name">First Name:</label>
                <input class="input" id="first-name" type="text">
            </div>
            <div>
                <label for="last-name">Last Name:</label>
                <input class="input" id="last-name" type="text">
            </div>
	      <div class="simple-keyboard"></div>
            <button id="next" type="button">Next</button>
        </div>
        <div id="keypad-holder">
            <div id="pin-enter">
                <input id="pin" type="password" placeholder="Enter PIN for new emp.">
            </div>
            <h3 id="pins-do-not-match">Pins do not match, please enter again.</h3>
            <div id="keypad">
                <div class="keypad-row"><div class="keypad-button">1</div><div class="keypad-button">2</div><div class="keypad-button">3</div></div>
                <div class="keypad-row"><div class="keypad-button">4</div><div class="keypad-button">5</div><div class="keypad-button">6</div></div>
                <div class="keypad-row"><div class="keypad-button">7</div><div class="keypad-button">8</div><div class="keypad-button">9</div></div>
                <div class="keypad-row"><div id="backspace" class="keypad-button">&#x2190;</div><div class="keypad-button">0</div><a class="keypad-button-enter"><button id="enter">Enter</button></a></div>
            </div>
        </div>
    </div>
    <div id="success-body">
        <h1 id="success-message" class="success-message"></h1>
        <a href="manager-add-employee.html"><button id="add-other-emps" type="button">Add Another Emp.</button></a>
        <a href="manager.html"><button id="return-to-menu" type="button">Return to Menu</button></a>
    </div>
<script src="../node_modules/simple-keyboard/build/index.js"></script>
<script>
const Keyboard = window.SimpleKeyboard.default;

	/*
const myKeyboard = new Keyboard({
  onChange: input => onChange(input),
  onKeyPress: button => onKeyPress(button)
});

function onChange(input) {
  document.querySelector(".input").value = input;
  console.log("Input changed", input);
}



function onKeyPress(button) {
  console.log("Button pressed", button);
}
       */
	/* multiple */

let selectedInput;

let keyboard = new Keyboard({
  onChange: input => onChange(input),
  onKeyPress: button => onKeyPress(button)
});

document.querySelectorAll(".input").forEach(input => {
  input.addEventListener("focus", onInputFocus);
  // Optional: Use if you want to track input changes
  // made without simple-keyboard
  input.addEventListener("input", onInputChange);
});

function onInputFocus(event) {
  selectedInput = `#${event.target.id}`;

  keyboard.setOptions({
    inputName: event.target.id
  });

  /**
   * Shift functionality
   */
  if (button === "{lock}" || button === "{shift}") handleShiftButton();
}

function onInputChange(event) {
  keyboard.setInput(event.target.value, event.target.id);
}

function onChange(input) {
  console.log("Input changed", input);
  document.querySelector(selectedInput || ".input").value = input;
}

function onKeyPress(button) {
  console.log("Button pressed", button);
}

function handleShiftButton() {
  let currentLayout = keyboard.options.layoutName;
  let shiftToggle = currentLayout === "default" ? "shift" : "default";

  keyboard.setOptions({
    layoutName: shiftToggle
  });
}


</script>
</body>
</html>
